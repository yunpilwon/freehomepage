<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÏÜåÌÜµÌï¥Ïöî - AAC & Ïä§ÏºÄÏ§ÑÎü¨</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons (Vanilla JS version for better stability) -->
    <script src="https://unpkg.com/lucide@0.263.1/dist/umd/lucide.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            background-color: #f3f4f6;
            touch-action: manipulation;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        /* Voice Wave Animation */
        @keyframes voice-wave {
            0%, 100% { height: 30%; opacity: 0.5; }
            50% { height: 100%; opacity: 1; }
        }
        .animate-voice-wave { animation: voice-wave 0.6s infinite ease-in-out; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Lucide Icon Adapter (ÏïàÏ†ïÏÑ± ÌôïÎ≥¥Ïö©) ---
        // ReactÏö© ÎùºÏù¥Î∏åÎü¨Î¶¨ ÎåÄÏã† Vanilla JSÏö©ÏùÑ React Ïª¥Ìè¨ÎÑåÌä∏Î°ú Î≥ÄÌôòÌïòÏó¨ ÏÇ¨Ïö©
        const LucideIcons = window.lucide ? window.lucide.icons : {};
        const Icons = {};

        if (Object.keys(LucideIcons).length > 0) {
            Object.keys(LucideIcons).forEach(key => {
                Icons[key] = ({ size = 24, className = "", color = "currentColor", ...props }) => {
                    // LucideÏùò toSvg Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÏó¨ SVG Î¨∏ÏûêÏó¥ ÏÉùÏÑ±
                    const svgString = LucideIcons[key].toSvg({
                        width: size,
                        height: size,
                        class: className,
                        stroke: color,
                        "stroke-width": 2, // Í∏∞Î≥∏ ÎëêÍªò ÏÑ§Ï†ï
                        ...props
                    });
                    
                    // HTMLÎ°ú Î†åÎçîÎßÅ
                    return (
                        <span 
                            dangerouslySetInnerHTML={{ __html: svgString }} 
                            style={{ display: 'inline-flex', alignItems: 'center', justifyContent: 'center' }}
                        />
                    );
                };
            });
        } else {
            console.error("Lucide icons not loaded");
        }

        // ÏïÑÏù¥ÏΩò Ï∂îÏ∂ú (Destructuring)
        const { 
            MessageCircle, Calendar, Play, X, Trash2, CheckCircle, 
            Utensils, Smile, Frown, Hand, Heart, Gamepad2, 
            BedDouble, BookOpen, School, Bus, Home, Plus,
            ArrowRight, Volume2, Settings, MinusCircle, 
            Calculator, Users, FlaskConical, Music, Stethoscope,
            Mic 
        } = Icons;

        // --- Îç∞Ïù¥ÌÑ∞ Ï†ïÏùò ---
        const AAC_DATA = {
            core: [
                { id: 'want', label: 'Ï£ºÏÑ∏Ïöî', icon: 'ü§≤', color: 'bg-yellow-200' },
                { id: 'stop', label: 'Í∑∏Îßå', icon: '‚úã', color: 'bg-red-200' },
                { id: 'help', label: 'ÎèÑÏôÄÏ§òÏöî', icon: 'üÜò', color: 'bg-blue-200' },
                { id: 'yes', label: 'ÎÑ§/Ï¢ãÏïÑÏöî', icon: 'üôÜ', color: 'bg-green-200' },
                { id: 'no', label: 'ÏïÑÎãàÏöî', icon: 'üôÖ', color: 'bg-gray-300' },
                { id: 'more', label: 'Îçî(More)', icon: '‚ûï', color: 'bg-purple-200' },
            ],
            food: [
                { id: 'water', label: 'Î¨º', icon: 'üíß', color: 'bg-blue-100' },
                { id: 'rice', label: 'Î∞•', icon: 'üçö', color: 'bg-white' },
                { id: 'snack', label: 'Í≥ºÏûê', icon: 'üç™', color: 'bg-orange-100' },
                { id: 'milk', label: 'Ïö∞Ïú†', icon: 'ü•õ', color: 'bg-blue-50' },
                { id: 'fruit', label: 'Í≥ºÏùº', icon: 'üçé', color: 'bg-red-100' },
            ],
            activity: [
                { id: 'toilet', label: 'ÌôîÏû•Ïã§', icon: 'üöΩ', color: 'bg-teal-100' },
                { id: 'play', label: 'ÎÜÄÏù¥', icon: 'üß∏', color: 'bg-indigo-100' },
                { id: 'sleep', label: 'ÏûêÏöî', icon: 'üò¥', color: 'bg-indigo-200' },
                { id: 'study', label: 'Í≥µÎ∂Ä', icon: 'üìù', color: 'bg-yellow-100' },
                { id: 'school', label: 'ÌïôÍµê', icon: 'üè´', color: 'bg-orange-200' },
            ],
            feeling: [
                { id: 'happy', label: 'Í∏∞ÎªêÏöî', icon: 'üòÑ', color: 'bg-yellow-100' },
                { id: 'sad', label: 'Ïä¨ÌçºÏöî', icon: 'üò≠', color: 'bg-blue-100' },
                { id: 'angry', label: 'ÌôîÎÇòÏöî', icon: 'üò°', color: 'bg-red-100' },
                { id: 'sick', label: 'ÏïÑÌååÏöî', icon: 'ü§í', color: 'bg-green-100' },
            ]
        };

        const SCHOOL_ACTIVITIES = [
            { id: 'arrival', label: 'Îì±Íµê', icon: 'üéí', type: 'routine', color: 'bg-yellow-100' },
            { id: 'korean', label: 'Íµ≠Ïñ¥', icon: 'üìö', type: 'study', color: 'bg-red-100' },
            { id: 'math', label: 'ÏàòÌïô', icon: 'üßÆ', type: 'study', color: 'bg-blue-100' },
            { id: 'social', label: 'ÏÇ¨Ìöå', icon: 'üèòÔ∏è', type: 'study', color: 'bg-orange-100' },
            { id: 'science', label: 'Í≥ºÌïô', icon: '‚öóÔ∏è', type: 'study', color: 'bg-green-100' },
            { id: 'music', label: 'ÏùåÏïÖ', icon: 'üéπ', type: 'art', color: 'bg-purple-100' },
            { id: 'art', label: 'ÎØ∏Ïà†', icon: 'üé®', type: 'art', color: 'bg-pink-100' },
            { id: 'gym', label: 'Ï≤¥Ïú°', icon: '‚öΩ', type: 'activity', color: 'bg-lime-100' },
            { id: 'therapy', label: 'ÏπòÎ£åÏã§', icon: 'üß©', type: 'therapy', color: 'bg-teal-100' },
            { id: 'break', label: 'Ïâ¨ÎäîÏãúÍ∞Ñ', icon: 'üõù', type: 'break', color: 'bg-sky-100' },
            { id: 'lunch', label: 'Ï†êÏã¨ÏãúÍ∞Ñ', icon: 'üç±', type: 'food', color: 'bg-orange-200' },
            { id: 'cleaning', label: 'Ï≤≠ÏÜå', icon: 'üßπ', type: 'routine', color: 'bg-gray-200' },
            { id: 'home', label: 'ÌïòÍµê', icon: 'üöå', type: 'routine', color: 'bg-yellow-200' },
        ];

        // --- Components ---

        // 1. Voice Visualizer
        const VoiceVisualizer = ({ isSpeaking }) => {
            if (!isSpeaking) return null;
            return (
                <div className="flex items-center justify-center space-x-1 h-6 px-2">
                    {[...Array(5)].map((_, i) => (
                        <div 
                            key={i}
                            className="w-1.5 bg-blue-500 rounded-full animate-voice-wave"
                            style={{ 
                                height: '100%',
                                animationDelay: `${i * 0.1}s`
                            }}
                        ></div>
                    ))}
                </div>
            );
        };

        // 2. Symbol Button
        const SymbolButton = ({ item, onClick, size = 'normal', showLabel = true }) => {
            const sizeClasses = size === 'large' ? 'h-40 text-6xl' : (size === 'small' ? 'h-24 text-3xl' : 'h-32 text-5xl');
            const colorClass = item.color || 'bg-white';
            
            return (
                <button 
                    onClick={() => onClick(item)}
                    className={`${colorClass} ${sizeClasses} w-full rounded-2xl shadow-md border-b-4 border-black/10 
                    flex flex-col items-center justify-center p-2 active:scale-95 transition-all hover:brightness-95`}
                >
                    <div className="mb-2 flex items-center justify-center drop-shadow-sm filter">
                        {typeof item.icon === 'string' ? item.icon : 
                         (item.icon ? <item.icon size={size === 'large' ? 64 : (size === 'small' ? 32 : 48)} /> : '')}
                    </div>
                    {showLabel && <span className="font-bold text-gray-800 text-lg leading-tight">{item.label}</span>}
                </button>
            );
        };

        // 3. AAC View
        const AACBoard = ({ speak, isSpeaking }) => {
            const [sentence, setSentence] = useState([]);
            const [activeCategory, setActiveCategory] = useState('core');

            const addToSentence = (item) => {
                setSentence([...sentence, item]);
                speak(item.label);
            };

            const playSentence = () => {
                if (sentence.length === 0) return;
                const fullText = sentence.map(s => s.label).join(' ');
                speak(fullText);
            };

            const clearSentence = () => setSentence([]);
            const backspace = () => setSentence(sentence.slice(0, -1));

            return (
                <div className="flex flex-col h-full bg-gray-50">
                    <div className="bg-white p-3 shadow-sm border-b-2 border-gray-200 sticky top-0 z-10">
                        <div className="flex items-center space-x-2 bg-gray-100 rounded-xl p-2 min-h-[80px]">
                            <div className="flex-1 flex space-x-2 overflow-x-auto p-1 no-scrollbar items-center">
                                {sentence.length === 0 ? (
                                    <span className="text-gray-400 self-center ml-2 text-sm flex items-center">
                                        {Mic && <Mic size={16} className="mr-2"/>} ÏÑ†ÌÉùÌïòÎ©¥ ÎßêÌï¥Ïöî
                                    </span>
                                ) : (
                                    sentence.map((item, idx) => (
                                        <div key={idx} className="flex-shrink-0 flex items-center space-x-2 px-3 py-2 rounded-xl border border-gray-300 bg-white shadow-sm animate-fade-in">
                                            <span className="text-2xl flex items-center">{typeof item.icon === 'string' ? item.icon : ''}</span>
                                            <span className="font-bold text-lg">{item.label}</span>
                                        </div>
                                    ))
                                )}
                                {isSpeaking && <VoiceVisualizer isSpeaking={isSpeaking} />}
                            </div>
                            
                            <div className="flex space-x-1">
                                <button onClick={backspace} className="p-3 bg-gray-200 rounded-lg active:bg-gray-300 flex items-center justify-center transition-colors" aria-label="ÏßÄÏö∞Í∏∞">
                                    {ArrowRight && <ArrowRight className="transform rotate-180" size={24} />}
                                </button>
                                <button onClick={clearSentence} className="p-3 bg-red-100 text-red-600 rounded-lg active:bg-red-200 flex items-center justify-center transition-colors" aria-label="Ï†ÑÏ≤¥ ÏÇ≠Ï†ú">
                                    {Trash2 && <Trash2 size={24} />}
                                </button>
                                <button 
                                    onClick={playSentence} 
                                    className={`p-3 rounded-lg shadow-md active:translate-y-1 transition-all flex items-center justify-center relative overflow-hidden
                                        ${isSpeaking ? 'bg-green-600 text-white ring-4 ring-green-200' : 'bg-green-500 text-white'}`}
                                    aria-label="ÎßêÌïòÍ∏∞"
                                >
                                    {Volume2 && <Volume2 size={28} className={isSpeaking ? 'animate-pulse' : ''} />}
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="flex overflow-x-auto p-2 bg-gray-50 space-x-2 no-scrollbar border-b border-gray-200">
                        {[
                            { id: 'core', label: 'ÌïµÏã¨Ïñ¥', icon: 'ü§≤' },
                            { id: 'food', label: 'ÏùåÏãù', icon: 'üç±' },
                            { id: 'activity', label: 'ÌôúÎèô', icon: 'üß∏' },
                            { id: 'feeling', label: 'Í∏∞Î∂Ñ', icon: 'üòÑ' },
                        ].map(cat => (
                            <button
                                key={cat.id}
                                onClick={() => setActiveCategory(cat.id)}
                                className={`flex items-center space-x-2 px-4 py-3 rounded-t-xl font-bold whitespace-nowrap transition-colors
                                    ${activeCategory === cat.id ? 'bg-white text-blue-600 border-t-4 border-blue-500 shadow-sm' : 'bg-gray-200 text-gray-500'}`}
                            >
                                <span className="text-xl">{cat.icon}</span>
                                <span>{cat.label}</span>
                            </button>
                        ))}
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 bg-white">
                        <div className="grid grid-cols-3 gap-3 pb-20 sm:grid-cols-4 md:grid-cols-5">
                            {(activeCategory === 'core' ? AAC_DATA.core : AAC_DATA[activeCategory]).map((item) => (
                                <SymbolButton key={item.id} item={item} onClick={addToSentence} />
                            ))}
                            {activeCategory !== 'core' && (
                                <>
                                    <div className="col-span-full h-px bg-gray-200 my-2"></div>
                                    <SymbolButton item={AAC_DATA.core[0]} onClick={addToSentence} />
                                    <SymbolButton item={AAC_DATA.core[1]} onClick={addToSentence} />
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // 4. Visual Schedule View
        const ScheduleBoard = ({ speak, isSpeaking }) => {
            const [tasks, setTasks] = useState([
                { ...SCHOOL_ACTIVITIES[1], uniqueId: 1 }, 
                { ...SCHOOL_ACTIVITIES[9], uniqueId: 2 }, 
                { ...SCHOOL_ACTIVITIES[2], uniqueId: 3 }
            ]);
            const [isEditing, setIsEditing] = useState(false);

            const completeCurrentTask = () => {
                if (tasks.length === 0) return;
                const current = tasks[0];
                const newTasks = tasks.slice(1);
                speak(`${current.label} ÎÅù. Ï∞∏ ÏûòÌñàÏñ¥Ïöî.`);
                setTasks(newTasks);
            };

            const addTask = (activity) => {
                const newTask = { ...activity, uniqueId: Date.now() };
                setTasks([...tasks, newTask]);
            };

            const removeTask = (uniqueId) => {
                setTasks(tasks.filter(t => t.uniqueId !== uniqueId));
            };

            if (isEditing) {
                return (
                    <div className="h-full flex flex-col bg-gray-100">
                        <div className="bg-white p-4 border-b border-gray-200 flex justify-between items-center shadow-sm">
                            <h2 className="font-bold text-lg text-gray-800 flex items-center">
                                {Settings && <Settings className="mr-2" size={20}/>} Ïä§ÏºÄÏ§Ñ ÏÑ§Ï†ï
                            </h2>
                            <button 
                                onClick={() => setIsEditing(false)}
                                className="px-6 py-2 bg-blue-500 text-white rounded-xl font-bold shadow-md active:bg-blue-600 transition-colors"
                            >
                                ÏôÑÎ£å
                            </button>
                        </div>

                        <div className="flex-1 overflow-hidden flex flex-col md:flex-row">
                            <div className="flex-1 p-4 overflow-y-auto border-r border-gray-200 bg-gray-50">
                                <h3 className="text-sm font-bold text-gray-500 mb-3 uppercase flex items-center">
                                    {Plus && <Plus size={16} className="mr-1"/>} ÌôúÎèô Ï∂îÍ∞Ä
                                </h3>
                                <div className="grid grid-cols-3 gap-2">
                                    {SCHOOL_ACTIVITIES.map((activity) => (
                                        <SymbolButton key={activity.id} item={activity} onClick={addTask} size="small" />
                                    ))}
                                </div>
                            </div>

                            <div className="flex-1 p-4 overflow-y-auto bg-white">
                                <h3 className="text-sm font-bold text-gray-500 mb-3 uppercase">ÌòÑÏû¨ ÏàúÏÑú (Ï¥ù {tasks.length}Í∞ú)</h3>
                                {tasks.length === 0 ? (
                                    <div className="flex flex-col items-center justify-center py-20 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl bg-gray-50">
                                        {Calendar && <Calendar size={48} className="mb-2 opacity-20"/>}
                                        <span>ÏôºÏ™ΩÏóêÏÑú ÌôúÎèôÏùÑ ÎàåÎü¨ Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî</span>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {tasks.map((task, index) => (
                                            <div key={task.uniqueId} className="flex items-center bg-white border border-gray-200 p-3 rounded-xl shadow-sm animate-fade-in">
                                                <span className="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-lg mr-4">
                                                    {index + 1}
                                                </span>
                                                <div className="text-4xl mr-4 filter drop-shadow-sm">
                                                    {task.icon}
                                                </div>
                                                <span className="font-bold text-gray-700 text-xl flex-1">{task.label}</span>
                                                <button 
                                                    onClick={() => removeTask(task.uniqueId)}
                                                    className="p-3 text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                                                >
                                                    {MinusCircle && <MinusCircle size={24} />}
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (tasks.length === 0) {
                return (
                    <div className="flex flex-col items-center justify-center h-full p-8 text-center bg-green-50 relative">
                         <button 
                            onClick={() => setIsEditing(true)}
                            className="absolute top-4 right-4 p-3 text-gray-400 hover:text-gray-600 hover:bg-green-100 rounded-full transition-colors"
                        >
                            {Settings && <Settings size={24} />}
                        </button>
                        <div className="bg-green-100 p-8 rounded-full mb-6 animate-bounce">
                            {CheckCircle && <CheckCircle size={80} className="text-green-600" />}
                        </div>
                        <h2 className="text-3xl font-bold text-green-800 mb-4">Î™®Îëê ÎÅùÎÇ¨Ïñ¥Ïöî!</h2>
                        <p className="text-xl text-green-700 mb-8">Ïò§Îäò ÌïòÎ£®ÎèÑ Ï∞∏ ÏûòÌñàÏñ¥Ïöî.</p>
                        <button onClick={() => setIsEditing(true)} className="px-8 py-4 bg-white border-2 border-green-500 text-green-700 rounded-2xl font-bold text-lg shadow-sm hover:bg-green-50 transition-colors">
                            ÏÉàÎ°úÏö¥ Ïä§ÏºÄÏ§Ñ ÎßåÎì§Í∏∞
                        </button>
                    </div>
                );
            }

            return (
                <div className="h-full flex flex-col p-4 space-y-4 bg-gray-100 overflow-y-auto relative">
                    <button 
                        onClick={() => setIsEditing(true)}
                        className="absolute top-4 right-4 p-2 bg-white/60 backdrop-blur rounded-full text-gray-500 hover:text-gray-800 hover:bg-white transition-all z-10 shadow-sm"
                    >
                        {Settings && <Settings size={24} />}
                    </button>

                    <div className="flex-1 bg-white rounded-3xl shadow-lg border-l-8 border-blue-500 overflow-hidden flex flex-col relative z-0">
                        <div className="bg-blue-500 text-white px-6 py-4 font-black text-2xl flex items-center shadow-md justify-between">
                            <div className="flex items-center">
                                <span className="bg-white text-blue-600 rounded-full w-10 h-10 flex items-center justify-center mr-3 text-xl shadow-sm">1</span>
                                Î®ºÏ†Ä (First)
                            </div>
                            {isSpeaking && <VoiceVisualizer isSpeaking={isSpeaking} />}
                        </div>
                        <div className="flex-1 flex flex-col items-center justify-center p-6 text-center">
                            <div className="text-[10rem] mb-6 transform transition-all hover:scale-105 flex items-center justify-center filter drop-shadow-lg leading-none cursor-pointer" onClick={() => speak(tasks[0].label)}>
                                {tasks[0].icon}
                            </div>
                            <h2 className="text-5xl font-bold text-gray-800 mb-10 tracking-tight">{tasks[0].label}</h2>
                            
                            <button 
                                onClick={completeCurrentTask}
                                className="w-full max-w-sm bg-green-500 hover:bg-green-600 text-white text-3xl font-bold py-6 rounded-2xl shadow-lg flex items-center justify-center space-x-4 active:scale-95 transition-all"
                            >
                                {CheckCircle && <CheckCircle size={40} strokeWidth={3} />}
                                <span>Îã§ ÌñàÏñ¥Ïöî!</span>
                            </button>
                        </div>
                    </div>

                    <div className="flex justify-center -my-3 z-10">
                        <div className="bg-gray-200 rounded-full p-2 border-4 border-gray-100 shadow-sm">
                            {ArrowRight && <ArrowRight className="text-gray-400 transform rotate-90" size={32} strokeWidth={3} />}
                        </div>
                    </div>

                    <div className="h-56 bg-gray-50 rounded-3xl border-4 border-dashed border-gray-300 opacity-80 flex flex-col relative z-0">
                        <div className="px-6 py-3 font-bold text-gray-500 text-xl border-b border-gray-200 bg-gray-100/50 rounded-t-3xl">
                            Îã§Ïùå (Then)
                        </div>
                        {tasks.length > 1 ? (
                            <div className="flex-1 flex items-center px-8" onClick={() => speak(`Îã§ÏùåÏùÄ ${tasks[1].label} ÏûÖÎãàÎã§`)}>
                                <div className="text-[5rem] mr-8 opacity-90 flex items-center justify-center filter drop-shadow-md">
                                    {tasks[1].icon}
                                </div>
                                <span className="text-4xl font-bold text-gray-600">{tasks[1].label}</span>
                            </div>
                        ) : (
                            <div className="flex-1 flex items-center justify-center text-gray-400 font-bold text-xl">
                                <span>ÎßàÏßÄÎßâ ÌôúÎèôÏù¥ÏóêÏöî</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main App Container
        function App() {
            const [currentView, setCurrentView] = useState('aac'); 
            const [isSpeaking, setIsSpeaking] = useState(false);

            const speak = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ko-KR';
                    utterance.rate = 0.9;
                    utterance.pitch = 1.0;

                    utterance.onstart = () => setIsSpeaking(true);
                    utterance.onend = () => setIsSpeaking(false);
                    utterance.onerror = () => setIsSpeaking(false);
                    
                    const voices = window.speechSynthesis.getVoices();
                    const krVoice = voices.find(v => v.lang.includes('ko') || v.lang.includes('KR'));
                    if (krVoice) utterance.voice = krVoice;
                    
                    window.speechSynthesis.speak(utterance);
                }
            };

            useEffect(() => {
                const loadVoices = () => window.speechSynthesis.getVoices();
                loadVoices();
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.onvoiceschanged = loadVoices;
                }
            }, []);

            return (
                <div className="w-full h-screen bg-gray-100 flex flex-col shadow-2xl overflow-hidden relative font-sans">
                    
                    <header className="bg-white border-b border-gray-200 px-4 py-3 flex justify-between items-center z-20 shadow-sm">
                        <h1 className="text-xl font-black text-gray-800 tracking-tight flex items-center">
                            <span className={`text-blue-500 text-3xl mr-2 transition-transform duration-300 ${isSpeaking ? 'scale-125' : ''}`}>‚óè</span> 
                            ÏÜåÌÜµÌï¥Ïöî
                        </h1>
                        <div className="flex items-center space-x-2">
                            {isSpeaking && <span className="text-xs font-bold text-blue-500 bg-blue-50 px-2 py-1 rounded-full animate-pulse">ÎßêÌïòÎäî Ï§ë...</span>}
                            <div className="text-sm text-gray-600 font-bold bg-gray-100 px-3 py-1.5 rounded-full border border-gray-200">
                                {currentView === 'aac' ? 'üó£Ô∏è ÏùòÏÇ¨ÏÜåÌÜµ' : 'üìÖ Ïä§ÏºÄÏ§Ñ'}
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 overflow-hidden relative">
                        {currentView === 'aac' 
                            ? <AACBoard speak={speak} isSpeaking={isSpeaking} /> 
                            : <ScheduleBoard speak={speak} isSpeaking={isSpeaking} />
                        }
                    </main>

                    <nav className="bg-white border-t border-gray-200 flex h-24 shadow-[0_-4px_10px_-1px_rgba(0,0,0,0.05)] z-20 pb-safe">
                        <button 
                            onClick={() => setCurrentView('schedule')}
                            className={`flex-1 flex flex-col items-center justify-center space-y-1 transition-all ${currentView === 'schedule' ? 'text-blue-600 bg-blue-50' : 'text-gray-400 hover:text-gray-600'}`}
                        >
                            {Calendar && <Calendar size={32} strokeWidth={currentView === 'schedule' ? 3 : 2} />}
                            <span className="text-lg font-bold">Ïä§ÏºÄÏ§Ñ (ÏùºÍ≥º)</span>
                        </button>

                        <div className="w-px bg-gray-200 my-4"></div>

                        <button 
                            onClick={() => setCurrentView('aac')}
                            className={`flex-1 flex flex-col items-center justify-center space-y-1 transition-all ${currentView === 'aac' ? 'text-green-600 bg-green-50' : 'text-gray-400 hover:text-gray-600'}`}
                        >
                            {MessageCircle && <MessageCircle size={32} strokeWidth={currentView === 'aac' ? 3 : 2} />}
                            <span className="text-lg font-bold">ÎßêÌïòÍ∏∞ (AAC)</span>
                        </button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
